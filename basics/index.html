<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Basics - Quadlek</title>
    <meta name="generator" content="Hugo 0.46" />

    
    <meta name="description" content="A slack bot built with customization in mind.">
    
    <link rel="canonical" href="https://jirwin.github.io/quadlek/basics/">
    
    <meta name="author" content="Justin Gallardo">
    

    <meta property="og:url" content="https://jirwin.github.io/quadlek/basics/">
    <meta property="og:title" content="Quadlek">
    <meta property="og:image" content="https://jirwin.github.io/quadlek/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Quadlek">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://jirwin.github.io/quadlek/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://jirwin.github.io/quadlek/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://jirwin.github.io/quadlek/fonts/icon.eot');
        src: url('https://jirwin.github.io/quadlek/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://jirwin.github.io/quadlek/fonts/icon.woff')
               format('woff'),
             url('https://jirwin.github.io/quadlek/fonts/icon.ttf')
               format('truetype'),
             url('https://jirwin.github.io/quadlek/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://jirwin.github.io/quadlek/stylesheets/application.css">
    <link rel="stylesheet" href="https://jirwin.github.io/quadlek/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://jirwin.github.io/quadlek/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://jirwin.github.io/quadlek/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://jirwin.github.io/quadlek/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-blue">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Quadlek: a customizable Slack bot framework
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/jirwin" title="@jirwin on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/jirwin" title="@jirwin on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>

</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/jirwin/quadlek" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://jirwin.github.io/quadlek/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Quadlek </strong>
        
          <br>
          jirwin/quadlek
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/jirwin/quadlek/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/jirwin/quadlek/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Home" href="https://jirwin.github.io/quadlek/">
	
	Home
</a>



  
</li>



<li>
  
    



<a class="current" title="Basics" href="https://jirwin.github.io/quadlek/basics/">
	
	Basics
</a>


<ul id="scrollspy">
</ul>


  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/jirwin" target="_blank" title="@jirwin on Twitter">
              @jirwin on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/jirwin" target="_blank" title="@jirwin on GitHub">
              @jirwin on GitHub
            </a>
          </li>
          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Basics </h1>

			

<p>While using Quadlek to build your Slack bot is meant to be straightforward, understanding the basics will go a long
ways to helping you accomplish your goals.</p>

<p>Quadlek is built with the fantastic <a href="https://github.com/nlopes/slack">nlopes/slack</a> client. If you run into trouble,
or just want to learn more about what you can do I recommend reading their docs.</p>

<h2 id="slack">Slack</h2>

<h3 id="api">API</h3>

<p>The <a href="https://api.slack.com">Slack API</a> is split into two parts: the web API, and the RTM(real time messaging) API.</p>

<p>The <a href="https://api.slack.com/web">web API</a> allows you to perform operations such as listing users and channels, create
new commands and webhooks, and view message history for your team.</p>

<p>The <a href="https://api.slack.com/rtm">RTM API</a> is how your bot will send and receive messages to your Slack team.</p>

<p>Quadlek exposes access to both of these APIs to plugins so that you can do whatever your heart desires.</p>

<h3 id="slash-commands">Slash Commands</h3>

<p>In Slack, the most common way to interact with your bot is to add <a href="https://api.slack.com/slash-commands">slash commands</a>.
Lets use the following as an example for a slash command that your bot should be able to respond to:</p>

<pre><code class="language-bash">/choose one fish, two fish, red fish, blue fish.
</code></pre>

<p>Slash commands are registered with the bot in the Slack API before hand with the command name(<code>choose</code> in our example),
and a callback URL. Note that the callback URL must be a valid HTTPS URL for Slack to succesfully use it. Whenever a user
activates the command, Slack will send a webhook to the specified URL containing all sorts of information including who
sent the message, what channel it was sent to, the contents of the command, etc. Your bot then receives the webhook and
processes it however it should, and can optionally respond to the command publically or privately. Later on, we&rsquo;ll get
into more about how Quadlek makes this easy for you.</p>

<h2 id="bolt">Bolt</h2>

<p><a href="https://github.com/boltdb/bolt">Bolt</a> is a simple and fast key value store written in Go. It stores a single file on disk in an efficient binary format,
and provides atomic get and update functionality. Quadlek uses bolt to allow plugins some persistence for things like:</p>

<ul>
<li>user data</li>
<li>performing oauth flows</li>
<li>configuration</li>
</ul>

<p>Most operations don&rsquo;t require any knowledge of how bolt works, but their documentation can be helpful in a pinch.</p>

<h2 id="quadlek">Quadlek</h2>

<p>Quadlek is built out of 4 major components: the bot, storage, webhook server, and plugins. With these components you are able to fully
utilize the Slack APIs to build whatever functionality you may need.</p>

<h3 id="bot">Bot</h3>

<p>The bot is the core of the Quadlek framework. It manages your Slack API clients(web and RTM), dispatches various Slack
events to your plugins and ensure that storage is consistent and available for your plugins to use. Plugins are provided
an instance of the bot so they can interact with the APIs and storage system.</p>

<h3 id="storage">Storage</h3>

<p>Using bolt, Quadlek provides namespaced(by plugin ID) key value stores for you to persist data across the lifetime of
your plugin. Plugins are provided a few methods for interacting with storage including: get key, set key, get and update key.</p>

<h3 id="webhook-server">Webhook Server</h3>

<p>The webhook server is an HTTP server that is setup for you to easily receive webhooks for slash commands and custom
webhooks that your plugins may add.</p>

<p>Note: the webhook server does not currently support HTTPS, so you will need to use
something like a reverse proxy or load balancer to terminate TLS before passing on requests to your bot.</p>

<h3 id="plugins">Plugins</h3>

<p>Plugins are the building block for giving your bot the ability to interact with your users. Plugins can have a wide
range of functionality including:</p>

<ul>
<li>slash commands</li>
<li>hooks</li>
<li>reaction hooks</li>
<li>custom webhooks</li>
<li>load function</li>
</ul>

<p>The general pattern for how these are implemented is that your plugin provides a function that forever reads from a
channel where the bot dispatches events to. As you receive these events, you handle them accordingly.</p>

<h4 id="slash-commands-1">Slash Commands</h4>

<p>As stated before, slash commands are the primary way users can interact with your bot. It is important that your slash
command&rsquo;s name matches the slash command name that is registered with your Slack application, else the webhook server
won&rsquo;t be able to dispatch the commands appropriately.</p>

<h4 id="hooks">Hooks</h4>

<p>Hooks receive every message that the bot sees so you can process and handle messages as you see fit. A good example of
this is the included karma plugin that scans each message to see if a user has incremented or decremented something so
that it can update storage with the new scores.</p>

<h4 id="reaction-hooks">Reaction Hooks</h4>

<p>Reaction Hooks receive an event every time a user reacts to a message with an emojii. An example of how you could use
this would be to tweet out a message anytime someone reacts with the <code>:twitter:</code> emojii.</p>

<h4 id="custom-webhooks">Custom Webhooks</h4>

<p>Plugins can implement custom webhook handlers that the webhook server will dispatch. The webhook server receives these
web requests and forwards them on to your plugin. This allows you to do more complex things like OAuth2 flows to let
users login and associate their Slack user account with an external service like Twitter or Spotify.</p>

<h4 id="load-function">Load Function</h4>

<p>Occasionally your plugin will need to do some initialization when the bot is started up. You can think of this as the
entry point to your plugin. Most of the time this isn&rsquo;t required, and can just be set to <code>nil</code>.</p>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the Apache v2 license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/jirwin.github.io\/quadlek\/';
      var repo_id  = 'jirwin\/quadlek';
    
    </script>

    <script src="https://jirwin.github.io/quadlek/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

